PA    EQU 30H
PB    EQU 31H
CA    EQU 32H
CB    EQU 33H

ORG 20
RUT_TIMER DW RELOJ

ORG 1000H
CODIGO DB "SARAN"
FIN DB ?

ORG 3000H
RELOJ: PUSH AX
MOV AL, [BX]
OUT PA, AL
INC BX
DEC CL

MOV AL, 20H
OUT EOI, AL
MOV AL, 0
OUT CONT, AL
POP AX
IRET

ORG 2000H
MOV BX, OFFSET CODIGO
MOV CL, OFFSET FIN - OFFSET CODIGO

CLI
MOV AL, 0FFH
OUT CA, AL

MOV AL, 11111101B
OUT IMR, AL

MOV AL, 5
OUT INT1, AL

MOV AL, 1
OUT COMP, AL
MOV AL, 0
OUT CONT, AL
STI

LOOP: CMP CL, 0
JNZ LOOP
INT 0
END