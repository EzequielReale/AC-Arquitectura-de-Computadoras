CONT  EQU 10H
COMP  EQU 11H
EOI   EQU 20H
IMR   EQU 21H
INT0  EQU 24H
INT1  EQU 25H

ORG 20
RUT_F10 DW ON_OFF

ORG 24
RUT_TIMER DW RELOJ

ORG 1000H
SEGUNDOS DB 10

ORG 3000H
ON_OFF: PUSH AX

IN AL, IMR
SUB AL, 11111100B
JNZ ENCENDER

IN AL, CONT
MOV DL, AL
JMP APAGAR

ENCENDER: MOV AL, DL
OUT CONT, AL

APAGAR: IN AL, IMR
XOR AL, 00000010B
OUT IMR, AL

MOV AL, 20H
OUT EOI, AL
POP AX
IRET


RELOJ: DEC CL

MOV AL, 20H
OUT EOI, AL
IRET

ORG 2000H

CLI
MOV CL, 1

MOV AL, 11111100B
OUT IMR, AL

MOV AL, 5
OUT INT0, AL

MOV AL, 6
OUT INT1, AL

MOV AL, SEGUNDOS
OUT COMP, AL

MOV AL, 0
OUT CONT, AL
STI

LOOP: CMP CL, 0
JNZ LOOP

INT 0
END